# 探索

## 问题

```

win10 python 能获取微信里面的数据吗？
我是把FiddlerRoot.cer发送到苹果微信上面的，能安装吗？
FiddlerRoot.cer  这个是不是Fiddler根证书 怎么安装到苹果上呢？
那么通过Fiddler 能不能抓取苹果手机里面的微信流量？
Fiddler监听手机微信数据
Fiddler监听 微信数据流量
win10爬取苹果手机微信数据，用什么比较好？
```

## 监听 微信数据流量

```
网络抓包工具可以捕获通过设备的所有网络流量
Wireshark：这是一个功能强大的网络协议分析工具，可以捕获和显示网络上传输的数据包的详细信息。
Fiddler：这是一个Web调试代理，可以监控HTTP和HTTPS流量
```

## Fiddler监听 微信数据流量

### 准备工作

1. **确保你有权限**：监听网络流量需要设备的所有者同意，未经授权的监听可能违法。
2. **安装Fiddler**：在电脑上下载并安装Fiddler。
3. **开启Fiddler的HTTPS解密功能**：Fiddler > Tools > Options > HTTPS > 勾选“Capture HTTPS Connects”和“Decrypt HTTPS traffic”。
### 配置Fiddler以捕获移动设备流量
1. **获取电脑的IP地址**：在命令提示符（Windows）中输入`ipconfig`，找到你的电脑在局域网中的IP地址。
2. **设置Fiddler以允许远程连接**：
   - Fiddler > Tools > Options > Connections
   - 勾选“Allow remote computers to connect”。
   - 记住或更改Fiddler的监听端口（默认为8888）。
3. **安装Fiddler的Root证书到手机上**：
   - 在手机浏览器中输入`http://<你的电脑IP地址>:<Fiddler端口>/`（例如：`http://192.168.1.100:8888/`）。
   - 点击“FiddlerRoot certificate”下载并安装证书。
### 配置手机以使用Fiddler作为代理
1. **连接到与电脑相同的Wi-Fi网络**。
2. **设置Wi-Fi代理**：
   - 打开手机的Wi-Fi设置。
   - 长按已连接的Wi-Fi网络，选择“修改网络”。
   - 在高级选项中，找到代理设置。
   - 选择“手动”。
   - 在代理服务器主机名中输入电脑的IP地址，在端口中输入Fiddler的端口（默认为8888）。
### 开始捕获流量
1. **在手机上启动微信**：确保微信是首次启动，这样它才会通过Fiddler进行所有的网络请求。
2. **在Fiddler中开始捕获**：确保Fiddler已经开始捕获流量。
3. **使用微信**：在手机上正常使用微信，Fiddler将捕获所有的HTTP/HTTPS流量。
### 分析捕获的数据
在Fiddler中，你可以查看和筛选捕获到的数据包。通过检查这些数据包，你可以分析微信的网络请求和响应。
### 停止捕获并清理
完成调试后，请记得：
- **关闭Fiddler的远程连接**：在Fiddler的Options > Connections中取消勾选“Allow remote computers to connect”。
- **移除手机上的代理设置**：在手机的Wi-Fi设置中，将代理设置为“无”或“关闭”。
- **删除手机上的Fiddler证书**：在手机的证书管理中删除Fiddler的Root证书。
请始终记住，未经授权监听他人通信是违法的，上述步骤仅供合法授权下的个人学习或软件开发调试使用。



## 那么通过Fiddler 能不能抓取苹果手机里面的微信流量？

是的，通过Fiddler 可以抓取苹果手机里面的微信流量，只要按照前面提到的步骤进行配置，理论上可以捕获微信发送和接收的数据包。以下是一些关键点：
1. **确保Fiddler正确配置**：包括开启HTTPS解密功能，允许远程连接，并在设备上安装Fiddler的根证书。
2. **设备代理设置**：确保你的苹果设备已经设置为使用Fiddler作为代理服务器。
3. **信任Fiddler证书**：在苹果设备上安装并信任Fiddler生成的证书，这样Fiddler才能解密HTTPS流量。
4. **微信的证书固定**：微信可能会实施证书固定（Certificate Pinning），这是一种安全措施，用于防止中间人攻击。如果微信使用了证书固定，Fiddler可能无法解密微信的HTTPS流量。不过，有一些方法可以绕过证书固定，例如使用Fiddler的AutoResponder功能或者修改FiddlerScript，但这些方法可能会违反微信的使用条款，并且需要一定的技术知识。
5. **法律法规遵守**：在进行流量捕获时，必须遵守相关的法律法规，并且只能用于合法和正当的目的。未经授权监控他人通信内容是非法的。
如果一切配置正确，当你使用微信时，Fiddler应该能够捕获其发送和接收的数据包。以下是一些你可能看到的数据包类型：
- **登录请求**：当你打开微信时，Fiddler会捕获登录请求和响应。
- **消息通信**：发送和接收的消息数据包。
- **多媒体传输**：图片、视频和文件的发送和接收。
- **其他API调用**：微信可能会与服务器进行其他各种API调用，这些也会被Fiddler捕获。
请注意，捕获和分析流量应该只用于合法的目的，如开发、调试或学习。未经授权的监控可能会侵犯隐私权，并可能导致法律责任。



## Fiddler 能抓取苹果的流量

是的，Fiddler 可以抓取苹果设备的流量，包括iPhone和iPad。要抓取苹果设备的流量，你需要进行一些特定的配置，以下是大致的步骤：
### 准备工作
1. **确保你有权限**：只有设备的所有者才能合法地监控其网络流量。
2. **安装Fiddler**：在电脑上安装Fiddler。
3. **开启Fiddler的HTTPS解密功能**：在Fiddler中，转到`Tools > Options > HTTPS`，勾选“Capture HTTPS Connects”和“Decrypt HTTPS traffic”。
### 配置Fiddler
1. **允许远程连接**：在Fiddler中，转到`Tools > Options > Connections`，勾选“Allow remote computers to connect”，并记下端口号（默认为8888）。
2. **安装Fiddler证书**：
   - 在电脑上启动Fiddler。
   - 在浏览器中访问`http://<电脑的IP地址>:<Fiddler端口>/`（例如：`http://192.168.1.100:8888/`）。
   - 点击“FiddlerRoot certificate”下载Fiddler的根证书。
   - 将下载的证书安装到苹果设备上。
### 配置苹果设备
1. **连接到与电脑相同的Wi-Fi网络**。
2. **设置HTTP代理**：
   - 打开设置应用。
   - 选择已连接的Wi-Fi网络。
   - 滑动到页面底部，点击“配置代理”。
   - 选择“手动”，在服务器栏输入电脑的IP地址，在端口栏输入Fiddler的端口号（默认为8888）。
3. **信任Fiddler证书**：
   - 打开设置应用。
   - 选择“通用” > “关于本机”。
   - 在“证书信任设置”中信任刚安装的Fiddler证书。
### 开始捕获流量
1. 在苹果设备上启动应用程序或浏览网页，Fiddler应该能够捕获所有通过代理的流量。
2. 在Fiddler中查看捕获的数据包。
### 注意事项
- Fiddler可能无法捕获某些使用UDP协议的流量或者那些不通过HTTP/HTTPS协议传输的数据。
- 某些应用可能会使用证书固定（Certificate Pinning），这可能会阻止Fiddler解密这些应用的流量。
- 请确保你遵守相关法律法规和苹果的使用条款，不要使用这些工具进行非法活动。
按照上述步骤操作后，你应该能够在Fiddler中看到苹果设备的网络流量。如果你遇到任何问题，可能需要检查每一步是否正确执行，或者查看Fiddler的文档和社区支持以获取帮助。



## FiddlerRoot.cer  这个是不是Fiddler根证书 怎么安装到苹果上呢？

是的，`FiddlerRoot.cer` 是Fiddler使用的根证书。要将这个证书安装到苹果设备上，你可以按照以下步骤进行操作：
### 在电脑上操作：
1. **启动Fiddler并信任证书**：
   - 打开Fiddler。
   - 转到“Tools”菜单 > “Options”。
   - 在“Options”对话框中，转到“HTTPS”选项卡。
   - 勾选“Capture HTTPS Connects”和“Decrypt HTTPS traffic”。
   - 点击“Actions”按钮，选择“Trust Root Certificate”来信任Fiddler的根证书。
2. **导出证书**：
   - 在“Actions”按钮下，选择“Export Root Certificate to Desktop”，这样就会将`FiddlerRoot.cer`证书文件导出到电脑桌面上。
### 在苹果设备上操作：
1. **通过邮件发送证书**：
   - 将`FiddlerRoot.cer`文件通过邮件发送给自己，或者使用AirDrop、iMessage等方式发送到你的苹果设备上。
2. **安装证书**：
   - 在苹果设备上打开邮件应用，找到包含`FiddlerRoot.cer`附件的邮件。
   - 点击附件以打开它，然后点击屏幕底部的“分享”或“安装”按钮。
   - 选择“安装证书”，然后按照提示操作。
3. **信任证书**：
   - 打开苹果设备的“设置”应用。
   - 滚动到底部，点击“通用”。
   - 点击“关于本机”。
   - 在“关于本机”页面中，找到“证书信任设置”（在iOS 10.3及以上版本中）并点击进入。
   - 在证书列表中找到Fiddler证书，并打开信任开关。
完成以上步骤后，Fiddler的根证书就应该被成功安装并信任于你的苹果设备上。这样，Fiddler就可以解密并监控通过该设备发送和接收的HTTPS流量了。
请记住，安装和使用自签名证书可能会引入安全风险，因此只在需要时使用，并在使用完毕后移除或禁用该证书。同时，确保你的使用行为符合相关法律法规和微信的服务条款。

## 我是把FiddlerRoot.cer发送到苹果微信上面的，能安装吗？

将 `FiddlerRoot.cer` 发送到苹果手机的微信上是可以的，但是你不能直接在微信应用内安装证书。你需要先将证书文件保存到手机上，然后通过手机的设置应用来安装证书。以下是详细步骤：
### 步骤 1: 保存证书文件
1. 在微信中打开包含 `FiddlerRoot.cer` 附件的消息。
2. 点击附件以预览它。
3. 在预览界面上，点击屏幕底部的“保存到文件”或“分享”按钮（具体名称可能因微信版本不同而异）。
4. 选择将文件保存到“文件”应用或某个指定的文件夹中。
### 步骤 2: 安装证书
1. 打开你苹果设备的“设置”应用。
2. 滚动到底部，点击“通用”。
3. 点击“VPN与设备管理”或“设备管理”（具体名称可能因iOS版本不同而异）。
4. 在列表中找到刚刚保存的 `FiddlerRoot.cer` 文件，它可能会显示为一个新的配置描述文件或证书。
5. 点击它，然后选择“安装”。
6. 根据提示输入你的密码或使用Touch ID/Face ID进行确认。
### 步骤 3: 信任证书
1. 在“设置”中，滚动到底部，点击“通用”。
2. 点击“关于本机”。
3. 在“关于本机”页面中，找到“证书信任设置”（在iOS 10.3及以上版本中）并点击进入。
4. 在证书列表中找到Fiddler证书，并打开信任开关。
完成以上步骤后，Fiddler的根证书就应该被成功安装并信任于你的苹果设备上。现在，你可以使用Fiddler来解密和监控通过该设备发送和接收的HTTPS流量了。
请确保你的行为合法且符合微信的服务条款，不要侵犯他人的隐私权。

## fiddle监听的微信数据 都是乱码的





## 微信文本加密

```
发送聊天内容的报文既不是HTTP，也不是HTTPS，那很可能是TCP、或UDP协议原始（Raw）封装。

为了确认到底是TCP还是UDP传输报文，特意去了微信研发公众号去确认，得到的确认是采用TCP传输。分为两种连接方式：

长连接：TCP + 私有协议 + MMTLS + 业务层
短连接：TCP + HTTP + MMTLS + 业务层

官方的口径是，短连接是为了兼容老版本的软件，而长连接完全是私有实现，所以造成Fiddle没有捕获到，
毕竟Fiddle只能捕获到HTTP或HTTPS，至于其它的协议压根不在其感兴趣范围！

于是，使用Wireshark捕获微信长连接的TCP报文，确实捕获到了，再怎么私有实现，总不能长翅膀飞！
但是这些TCP报文没有展示的意义，TCP头之后字段全是杂乱无章的，这些都在预料之中！

https://www.163.com/dy/article/GNFGU6IF05119TBU.html
```



111111111

# 监听苹果微信



## 流程

```
电脑上安装Fiddler，开启Fiddler的HTTPS解密功能，设置Fiddler以允许远程连接
手机安装证书Fiddler根证书，信任证书
手机与电脑连接相同的Wi-Fi网络
电脑在局域网中的IP:192.168.31.170
```

要使用Fiddler监听手机上的微信数据流量，你需要按照以下步骤操作。请注意，这些步骤仅适用于合法的调试和个人学习目的，且必须遵守相关法律法规。

xxx

## 1111